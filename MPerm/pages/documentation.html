<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
	
<style>
	.post-container {
	    margin: 20px 20px 0 0;  
	    border: 0px solid #333;
	    overflow: auto
	}
	.post-thumb {
	    float: left
	}
	.post-thumb img {
	    display: block
	}
	.post-content {
	    margin-left: 180px
	}

</style>



</head><body>




<div id="mainPage">
<!--
<h1><font color="red">Use a different output file</font></h1>
-->

<!--
ALso add in other stuff about the reports directory.
- Create reference link to the youtbue video https://youtu.be/Wz6L2D3dFKs
- Create links to the example analysis output on the page
-->

<h1>Documentation</h1>
	

<h2>Installation</h2>

<h4>Virtual Machine</h4>
<p>Users are recommended to use M-Perm with the provided Virtual Machine. Please visit <a href="index.html?page=tooldownload">this</a> page for more instructions how to use the provided Virtual Machine.</p>


<h4>Download from Source</h4>

<p>You may also install M-Perm using the publicly available source code using the <a href="https://github.com/dan7800/MPermission/blob/master/README.md" target="_blank">instructions</a> provided on the project's <a href="https://github.com/dan7800/MPermission/" target="_blank">GitHub</a> page.</p>





<!--
<h2>Usage</h2>
<p>Once installed, you may use the following steps to examine an app using M-Perm.

<ol>
  <li></li>
  <li></li>
  <li></li>

</ol>
-->

<!--
Choose Target App to Analyze: M-Perm is capable of per- forming a permissions analysis on Android M 6.0 (API 23) apps. Although we have provided many popular APK files in the VM for analysis, the user may choose to examine any Android M app that they choose. In or VM, we use the Desktop/mperm/MPermission/sample_apks direc- tory. The user should be cautious to only analyze Marshmal- low apps using M-Perm, as older apps may lead to unexpected results.
4. Reverse Engineer Target App: The next step is to extract the necessary files from the APK file or analysis. This is the most time consuming process of M-Perm. The following command should be used to begin the reverse engineering process:
Figure 3 shows the execution of the reverse engineering por- tion of the app.
5. Run Analysis Portion: The analysis portion of M-Perm will only take a few seconds to run, and may be ran using the following command:
Figure 4 demonstrates the analysis portion of M-Perm.
6. Analyze Output: The previous analysis portion of M-Perm produces the output of two .txt files:
(a) analysis_<package_name>
(b) source_report_<package_name>
These are located in the reports directory of M-Perm. A sam- ple output of Facebook Lite analysis_<package_name> is shown in Listing 1.

-->


</p>

<h4>Youtube Screencast</h4>
   <iframe width="560" height="315" src="https://www.youtube.com/embed/Wz6L2D3dFKs" frameborder="0" allowfullscreen></iframe>





<h2>Output</h2>
<p>
M-Perm produces an <a href="pages/files/analysis_com.amazon.avod.thirdpartyclient.txt" target="_blank">output file</a> with the following primary components:
</p>


<h4>Package</h4>
The package name used in the app.
<pre>Package: com.amazon.avod.thirdpartyclient</pre>


<br />
<h4>Android Permissions</h4>
The report shows both '<a href="https://developer.android.com/guide/topics/security/normal-permissions.html" target="_blank">Normal</a>' and '<a href="https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous" target="_blank">Dangerous</a>' Android permissions which the app may request.
<pre>----------- Permissions from Manifest ------------
   0 android.permission.WAKE_LOCK
   1 com.amazon.identity.permission.GENERIC_IPC
   2 com.amazon.identity.permission.CAN_CALL_MAP_INFORMATION_PROVIDER
   3 android.permission.INTERACT_ACROSS_USERS
   4 android.permission.CHANGE_NETWORK_STATE
   5 android.permission.READ_PHONE_STATE
   6 com.amazon.dcp.sso.permission.MANAGE_COR_PFM
   7 com.amazon.dcp.sso.permission.USE_DEVICE_CREDENTIALS
   8 amazon.permission.COLLECT_METRICS
   9 android.permission.INTERNET
  10 android.permission.AUTHENTICATE_ACCOUNTS
  11 android.permission.ACCESS_NETWORK_STATE
  12 com.amazon.dcp.config.permission.DYN_CONFIG_VALUES_UPDATED
  13 com.amazon.dcp.sso.permission.account.changed
  14 android.permission.MANAGE_ACCOUNTS
  15 android.permission.ACCESS_WIFI_STATE
  16 com.amazon.CONTENT_PROVIDER_ACCESS
  17 android.permission.WRITE_EXTERNAL_STORAGE
  18 com.amazon.dcp.sso.permission.AmazonAccountPropertyService.property.changed
  19 com.amazon.identity.auth.device.perm.AUTH_SDK
  20 android.permission.USE_CREDENTIALS
  21 com.amazon.avod.SDK_ACCESS
  22 com.amazon.dcp.sso.permission.CUSTOMER_ATTRIBUTE_SERVICE
  23 android.permission.READ_SYNC_SETTINGS
  24 android.permission.WRITE_SYNC_SETTINGS
  25 com.amazon.dcp.metrics.permission.METRICS_PERMISSION
  26 android.permission.GET_ACCOUNTS
  27 com.amazon.identity.permission.CALL_AMAZON_DEVICE_INFORMATION_PROVIDER</pre>

<br />





<h4>Third Party Permissions</h4>
Developers may also create their own <a href="https://source.android.com/security/overview/app-security.html#how-users-understand-third-party-applications" target="_blank">3rd party permissions</a>, which are also reported by M-Perm.
<pre>------------ Third Party Permissions -------------
   0 com.amazon.identity.permission.CALL_AMAZON_DEVICE_INFORMATION_PROVIDER
   1 com.amazon.identity.permission.GENERIC_IPC
   2 com.amazon.dcp.config.permission.DYN_CONFIG_VALUES_UPDATED
   3 com.amazon.dcp.sso.permission.USE_DEVICE_CREDENTIALS
   4 com.amazon.dcp.sso.permission.account.changed
   5 com.amazon.identity.permission.CAN_CALL_MAP_INFORMATION_PROVIDER
   6 com.amazon.CONTENT_PROVIDER_ACCESS
   7 com.amazon.dcp.sso.permission.AmazonAccountPropertyService.property.changed
   8 com.amazon.identity.auth.device.perm.AUTH_SDK
   9 com.amazon.dcp.metrics.permission.METRICS_PERMISSION
  10 com.amazon.avod.SDK_ACCESS
  11 com.amazon.dcp.sso.permission.CUSTOMER_ATTRIBUTE_SERVICE
  12 com.amazon.dcp.sso.permission.MANAGE_COR_PFM</pre>



<br />
<h4>Requested Dangerous (and Groups)</h4>
M-Perm also reports all requested '<a href="https://developer.android.com/guide/topics/security/permissions.html#normal-dangerous" target="_blank">Dangerous</a>' permissions, along with the groups which they belong to.
<pre>-------- Requested Dangerous Permissions ---------
storage: READ_EXTERNAL_STORAGE
storage: WRITE_EXTERNAL_STORAGE
phone: READ_PHONE_STATE
phone: CALL_PHONE
phone: READ_CALL_LOG
phone: WRITE_CALL_LOG
phone: ADD_VOICEMAIL
phone: USE_SIP
phone: PROCESS_OUTGOING_CALLS
contacts: READ_CONTACTS
contacts: WRITE_CONTACTS
contacts: GET_ACCOUNTS</pre>



<br />
<h4>Under and overprivs</h4>
Many apps contain both <a href="https://people.eecs.berkeley.edu/~dawnsong/papers/2011%20Android%20permissions%20demystified.pdf" target="_blank">over &amp; under priviledges</a>, which are reported by the tool.
<pre>
--------- Unrequested Dangerous (Under) ----------
if (context.checkCallingOrSelfPermission("android.permission.RECEIVE_SMS") == 0) {


----------- Requested Dangerous (Over) -----------
['READ_EXTERNAL_STORAGE', 'WRITE_EXTERNAL_STORAGE']
['READ_PHONE_STATE', 'CALL_PHONE', 'READ_CALL_LOG', 'WRITE_CALL_LOG', 'ADD_VOICEMAIL', 'USE_SIP', 'PROCESS_OUTGOING_CALLS']
['READ_CONTACTS', 'WRITE_CONTACTS', 'GET_ACCOUNTS']</pre>


<br />
<h4>Complete Output</h4>
<p>An exmaple complete result set from an Amazon app is shown below.</p>
<iframe src="pages/files/analysis_com.amazon.avod.thirdpartyclient.txt" width="400" height="2000"></iframe>



<!-- Show some of the output of the app -->
<!--
<pre>
  This text has
  been formatted using
  the HTML pre tag. The brower should
  display all white space
  as it was entered.
  <iframe src="pages/files/analysis_com.amazon.avod.thirdpartyclient.txt"></iframe>
</pre>
-->



</div>



</body></html>